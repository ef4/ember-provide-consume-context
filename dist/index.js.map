{"version":3,"file":"index.js","sources":["../src/-private/decorators.ts"],"sourcesContent":["import type ContextRegistry from '../context-registry';\nimport { DECORATED_PROPERTY_CLASSES } from './provide-consume-context-container';\nimport { getContextValue, hasContext } from './utils';\n\nexport function provide(contextKey: keyof ContextRegistry) {\n  return function decorator(target: any, key: string) {\n    // Track the class as having a decorated property. Later, this will be used\n    // on instances of this component to register them as context providers.\n    const currentContexts = DECORATED_PROPERTY_CLASSES.get(target.constructor);\n    if (currentContexts == null) {\n      DECORATED_PROPERTY_CLASSES.set(target.constructor, {\n        [contextKey]: key,\n      });\n    } else {\n      DECORATED_PROPERTY_CLASSES.set(target.constructor, {\n        ...currentContexts,\n        [contextKey]: key,\n      });\n    }\n  };\n}\n\nexport function consume<K extends keyof ContextRegistry>(\n  contextKey: K,\n): PropertyDecorator {\n  return function decorator() {\n    return {\n      get(): ContextRegistry[K] | null | undefined {\n        if (hasContext(this, contextKey)) {\n          return getContextValue(this, contextKey);\n        }\n\n        return null;\n      },\n    };\n  };\n}\n"],"names":["provide","contextKey","decorator","target","key","currentContexts","DECORATED_PROPERTY_CLASSES","get","constructor","set","consume","hasContext","getContextValue"],"mappings":";;;AAIO,SAASA,OAAOA,CAACC,UAAiC,EAAE;AACzD,EAAA,OAAO,SAASC,SAASA,CAACC,MAAW,EAAEC,GAAW,EAAE;AAClD;AACA;IACA,MAAMC,eAAe,GAAGC,0BAA0B,CAACC,GAAG,CAACJ,MAAM,CAACK,WAAW,CAAC,CAAA;IAC1E,IAAIH,eAAe,IAAI,IAAI,EAAE;AAC3BC,MAAAA,0BAA0B,CAACG,GAAG,CAACN,MAAM,CAACK,WAAW,EAAE;AACjD,QAAA,CAACP,UAAU,GAAGG,GAAAA;AAChB,OAAC,CAAC,CAAA;AACJ,KAAC,MAAM;AACLE,MAAAA,0BAA0B,CAACG,GAAG,CAACN,MAAM,CAACK,WAAW,EAAE;AACjD,QAAA,GAAGH,eAAe;AAClB,QAAA,CAACJ,UAAU,GAAGG,GAAAA;AAChB,OAAC,CAAC,CAAA;AACJ,KAAA;GACD,CAAA;AACH,CAAA;AAEO,SAASM,OAAOA,CACrBT,UAAa,EACM;EACnB,OAAO,SAASC,SAASA,GAAG;IAC1B,OAAO;AACLK,MAAAA,GAAGA,GAA0C;AAC3C,QAAA,IAAII,UAAU,CAAC,IAAI,EAAEV,UAAU,CAAC,EAAE;AAChC,UAAA,OAAOW,eAAe,CAAC,IAAI,EAAEX,UAAU,CAAC,CAAA;AAC1C,SAAA;AAEA,QAAA,OAAO,IAAI,CAAA;AACb,OAAA;KACD,CAAA;GACF,CAAA;AACH;;;;"}